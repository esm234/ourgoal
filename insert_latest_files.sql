-- =====================================================
-- INSERT LATEST FILES DATA
-- ุฅุถุงูุฉ ุฃุญุฏุซ ุงููููุงุช (5 ูููุงุช ุฌุฏูุฏุฉ)
-- =====================================================

BEGIN;

-- ุฅุฏุฑุงุฌ ุงููููุงุช ุงูุฌุฏูุฏุฉ
INSERT INTO public.files (title, description, category, file_url, file_size, downloads) VALUES

-- 1. ุงูุฎุทุฃ ุงูุณูุงูู
(
    'ุงูุฎุทุฃ ุงูุณูุงูู',
    'ุงูููู ุบูุฑ ูุญูู ูุบูุฑ ุงููุดุชุฑููู ุจุฏูุฑุฉ
ุฃ/ุงููุงุจ ุนุจุฏุงูุนุธููโผ๏ธ',
    'verbal',
    'https://drive.google.com/file/d/10QmflW9-yTK2oR9dxXrWWkPe-zmtojQT/view?usp=sharing',
    '1 MB',
    0
),

-- 2. ูุทุน ุงููฉูฅ ุงูุนุงุฆุฏุฉ
(
    'ูุทุน ุงููฉูฅ ุงูุนุงุฆุฏุฉ',
    'ุงูููู ุบูุฑ ูุญูู ูุบูุฑ ุงููุดุชุฑููู ุจุฏูุฑุฉ
ุฃ/ุงููุงุจ ุนุจุฏุงูุนุธููโผ๏ธ',
    'verbal',
    'https://drive.google.com/file/d/1KvmgatCuii4Xoklf1kkjQ1tQIXREYOZH/view?usp=sharing',
    '1 MB',
    0
),

-- 3. ููุฎุต ุงูุชุฃุณูุณ ุงูุดุงูู ููุธู ุฃูุฑ ุฌูู
(
    'ููุฎุต ุงูุชุฃุณูุณ ุงูุดุงูู ููุธู ุฃูุฑ ุฌูู',
    'ุงูููู ุบูุฑ ูุญูู ูุบูุฑ ุงููุดุชุฑููู ุจุฏูุฑุฉ
ุฃ/ุงููุงุจ ุนุจุฏุงูุนุธููโผ๏ธ',
    'verbal',
    'https://drive.google.com/file/d/19haE4VluUmRV9B8LNP2GFx5FeJIHHYIl/view?usp=sharing',
    '2.5 MB',
    0
),

-- 4. ููู ุงูููุงููู
(
    'ููู ุงูููุงููู',
    'ููู ููุงููู ุงูููู | ุงููุญูุณุจ

- ุงูููู ูุฌูุน ูู ููุงููู ุงูููู ุงูููุฌูุฏู ูู ุงูุจูููโก๏ธ',
    'quantitative',
    'https://drive.google.com/file/d/1wwtjnfI1UK4z_b82v1uh79PP9Y7fEDIZ/view?usp=sharing',
    '1 MB',
    0
),

-- 5. ูุชุดุงุจูุงุช ุงูููู
(
    'ูุชุดุงุจูุงุช ุงูููู',
    'ููู ุงููุชุดุงุจูุงุช ูู ุซูุจุฉ ุงูุฌุฏูุฏ๐ซก

ู ุงุฎูุฑุง ู ุจูุง ุฃู ุงูููู ูุงู ุงุนุฌุงุจูู ุญุฏุซูุงู ููุจูู ูกูู ุ ูุด ุจุณ ูุฏุง !
ูุง ู ููุงู ุบูุฑูุง ุงูุชุตููู ู ุนุฏููุง ูุชูุฑ ุนุดุงู ูุณูู ุนูููู ูุฐุงูุฑุชูู ู ุชุณุชูุชุนูุง ุจุดูู ู ุฌูุฏู ุงูููโ๏ธ๐ป

ูุงุฑูุช ูุชูุณููุงุด ูู ุฏุนูุงุชูู๐ค',
    'quantitative',
    'https://drive.google.com/file/d/1uNNLtS2sMtHhNoAop4rOTC1cOQCrv_Up/view?usp=sharing',
    '11 MB',
    0
),

-- 6. ูุณุงุฆู ุงูุณุฑุนุฉ
(
    'ูุณุงุฆู ุงูุณุฑุนุฉ',
    'ุงูููู ุบูุฑ ูุญูู ูุบูุฑ ุงููุดุชุฑููู ุจุฏูุฑุฉ
ุฃ/ุงููุงุจ ุนุจุฏุงูุนุธููโผ๏ธ',
    'quantitative',
    'https://drive.google.com/file/d/1dauWYFbaVIIQG9QsPezVDEYG6B50dcZ3/view?usp=sharing',
    '1 MB',
    0
),

-- 7. ุงููุชุชุงุจุนุงุช
(
    'ุงููุชุชุงุจุนุงุช',
    'ุงูููู ุบูุฑ ูุญูู ูุบูุฑ ุงููุดุชุฑููู ุจุฏูุฑุฉ
ุฃ/ูุญููุฏ ุงูููุตูโผ๏ธ',
    'quantitative',
    'https://drive.google.com/file/d/1CQDNKGlxyCrC0GVh2ZscI4Jl4KEz8mBi/view?usp=sharing',
    '80 MB',
    0
),

-- 8. ุงูุงุนูุงุฑ
(
    'ุงูุงุนูุงุฑ',
    'ุงูููู ุบูุฑ ูุญูู ูุบูุฑ ุงููุดุชุฑููู ุจุฏูุฑุฉ
ุฃ/ูุญููุฏ ุงูููุตูโผ๏ธ',
    'verbal',
    'https://drive.google.com/file/d/1tx5Pb_1Bktj9qEiz-JTqz6iWRlA4Zrxt/view?usp=sharing',
    '2 MB',
    0
),

-- 9. ูุณุงุฆู ุตูุบุชูุง ูุดุงุจูุฉ
(
    'ูุณุงุฆู ุตูุบุชูุง ูุดุงุจูุฉ',
    'ุงูููู ุบูุฑ ูุญูู ูุบูุฑ ุงููุดุชุฑููู ุจุฏูุฑุฉ
ุฃ/ูุญููุฏ ุงูููุตูโผ๏ธ',
    'quantitative',
    'https://drive.google.com/file/d/16aLb8MUonvQlquEEqcmskYcb0mYS8yqT/view?usp=sharing',
    '55 MB',
    0
),

-- 10. ููู ุชููููุงุช ุงูููู
(
    'ููู ุชููููุงุช ุงูููู',
    'ุงูููู ุบูุฑ ูุญูู ูุบูุฑ ุงููุดุชุฑููู ุจุฏูุฑุฉ
ุฃ/ูุญููุฏ ุงูููุตูโผ๏ธ

ูุงุฑูุช ูุชูุณููุงุด ูู ุฏุนูุงุชูู๐ค',
    'quantitative',
    'https://drive.google.com/file/d/1xsGybcYrWiHwzEwV5F9wNQt8dG-u06Tt/view?usp=sharing',
    '18 MB',
    0
)

ON CONFLICT DO NOTHING;

-- ุงูุชุญูู ูู ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช ุจูุฌุงุญ
DO $$
DECLARE
    file_count INTEGER;
BEGIN
    SELECT COUNT(*) INTO file_count FROM public.files
    WHERE title IN (
        'ุงูุฎุทุฃ ุงูุณูุงูู',
        'ูุทุน ุงููฉูฅ ุงูุนุงุฆุฏุฉ',
        'ููุฎุต ุงูุชุฃุณูุณ ุงูุดุงูู ููุธู ุฃูุฑ ุฌูู',
        'ููู ุงูููุงููู',
        'ูุชุดุงุจูุงุช ุงูููู',
        'ูุณุงุฆู ุงูุณุฑุนุฉ',
        'ุงููุชุชุงุจุนุงุช',
        'ุงูุงุนูุงุฑ',
        'ูุณุงุฆู ุตูุบุชูุง ูุดุงุจูุฉ',
        'ููู ุชููููุงุช ุงูููู'
    );

    RAISE NOTICE 'ุชู ุฅุฏุฑุงุฌ % ูููุงุช ุฌุฏูุฏุฉ ุจูุฌุงุญ', file_count;

    IF file_count >= 10 THEN
        RAISE NOTICE 'ุฌููุน ุงููููุงุช ุงูุฌุฏูุฏุฉ ุงูู 10 ุชู ุฅุฏุฑุงุฌูุง ุจูุฌุงุญ โ';
    ELSE
        RAISE WARNING 'ุจุนุถ ุงููููุงุช ูู ูุชู ุฅุฏุฑุงุฌูุง - ุชุญูู ูู ูุฌูุฏ ูููุงุช ููุฑุฑุฉ';
    END IF;
END $$;

-- ุนุฑุถ ุงููููุงุช ุงูุฌุฏูุฏุฉ ุงููุถุงูุฉ ููุชุฃููุฏ
SELECT
    id,
    title,
    category,
    file_size,
    downloads,
    created_at
FROM public.files
WHERE title IN (
    'ุงูุฎุทุฃ ุงูุณูุงูู',
    'ูุทุน ุงููฉูฅ ุงูุนุงุฆุฏุฉ',
    'ููุฎุต ุงูุชุฃุณูุณ ุงูุดุงูู ููุธู ุฃูุฑ ุฌูู',
    'ููู ุงูููุงููู',
    'ูุชุดุงุจูุงุช ุงูููู',
    'ูุณุงุฆู ุงูุณุฑุนุฉ',
    'ุงููุชุชุงุจุนุงุช',
    'ุงูุงุนูุงุฑ',
    'ูุณุงุฆู ุตูุบุชูุง ูุดุงุจูุฉ',
    'ููู ุชููููุงุช ุงูููู'
)
ORDER BY created_at DESC;

COMMIT;
