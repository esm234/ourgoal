-- =====================================================
-- INSERT ADDITIONAL FILES DATA
-- ุฅุถุงูุฉ ุงููููุงุช ุงูุฅุถุงููุฉ ุงูุฌุฏูุฏุฉ (5 ูููุงุช)
-- =====================================================

BEGIN;

-- ุฅุฏุฑุงุฌ ุงููููุงุช ุงูุฅุถุงููุฉ ุงูุฌุฏูุฏุฉ
INSERT INTO public.files (title, description, category, file_url, file_size, downloads) VALUES

-- 1. ููู ุงูุงุฌุงุจุฉ ุงููุงุญุฏุฉ
(
    'ููู ุงูุงุฌุงุจุฉ ุงููุงุญุฏุฉ',
    'ุงูููู ุบูุฑ ูุญูู ูุบูุฑ ุงููุดุชุฑููู ุจุฏูุฑุฉ 
ุฃ/ุงููุงุจ ุนุจุฏุงูุนุธููโผ๏ธ',
    'verbal',
    'https://drive.google.com/file/d/19-puGK_IV2sm_OJMgVRl-4oAE1K7v-1O/view?usp=sharing',
    '1 MB',
    0
),

-- 2. ุจุณุจูุณุฉ ุงููุนุงูู
(
    'ุจุณุจูุณุฉ ุงููุนุงูู',
    'ุงูููู ุงููู ููุญู ุงุบูุจ ูุดุงูู ูู ุงูููุธู ุ ูุฌูุน ูู ุงููููุงุช ุงูุตุนุจุฉ ูู ุงููุญูุณุจ ุจูุนุงูููู ูุน ูุฌูุฏ ููุฒุฉ ุงูุจุญุซ ุนุดุงู ูู ูู ูููุฉ ูููุช ูุนุงู ู ุงูุช ุจุชุฐุงูุฑ ุชูุฏุฑ ุชุทูุนูุง ูู ุซุงููุง๐คฉ',
    'verbal',
    'https://drive.google.com/file/d/11kHLWOnxOMN4F3BKSLQViNWTbo91RmXe/view?usp=sharing',
    '415 KB',
    0
),

-- 3. ุงูููุฑุฏุฉ ุงููุชุดุงุจูุฉ
(
    'ุงูููุฑุฏุฉ ุงููุชุดุงุจูุฉ',
    'ุงูููู ุบูุฑ ูุญูู ูุบูุฑ ุงููุดุชุฑููู ุจุฏูุฑุฉ 
ุฃ/ุงููุงุจ ุนุจุฏุงูุนุธููโผ๏ธ',
    'verbal',
    'https://drive.google.com/file/d/1tQPy6FRP6bWMi3ea8bXyJHPc-rEq2stP/view?usp=sharing',
    '300 KB',
    0
),

-- 4. ุงูุณุจ ุนููุงู ูููุต
(
    'ุงูุณุจ ุนููุงู ูููุต',
    'ุงูููู ุบูุฑ ูุญูู ูุบูุฑ ุงููุดุชุฑููู ุจุฏูุฑุฉ 
ุฃ/ุงููุงุจ ุนุจุฏุงูุนุธููโผ๏ธ',
    'verbal',
    'https://drive.google.com/file/d/1dDapxaMmnlrCmaRgDAl3rCPBvsmA6r6N/view?usp=sharing',
    '1 MB',
    0
),

-- 5. ุงูุชุนุฏุงุฏ
(
    'ุงูุชุนุฏุงุฏ',
    'ุงูููู ุบูุฑ ูุญูู ูุบูุฑ ุงููุดุชุฑููู ุจุฏูุฑุฉ 
ุฃ/ุงููุงุจ ุนุจุฏุงูุนุธููโผ๏ธ',
    'verbal',
    'https://drive.google.com/file/d/1gqMasKJBcfcJRx9Gmto2_bj84-8o13QO/view?usp=sharing',
    '1 MB',
    0
)

ON CONFLICT DO NOTHING;

-- ุงูุชุญูู ูู ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช ุจูุฌุงุญ
DO $$
DECLARE
    file_count INTEGER;
BEGIN
    SELECT COUNT(*) INTO file_count FROM public.files 
    WHERE title IN (
        'ููู ุงูุงุฌุงุจุฉ ุงููุงุญุฏุฉ',
        'ุจุณุจูุณุฉ ุงููุนุงูู',
        'ุงูููุฑุฏุฉ ุงููุชุดุงุจูุฉ',
        'ุงูุณุจ ุนููุงู ูููุต',
        'ุงูุชุนุฏุงุฏ'
    );
    
    RAISE NOTICE 'ุชู ุฅุฏุฑุงุฌ % ูููุงุช ุฅุถุงููุฉ ุฌุฏูุฏุฉ ุจูุฌุงุญ', file_count;
    
    IF file_count >= 5 THEN
        RAISE NOTICE 'ุฌููุน ุงููููุงุช ุงูุฅุถุงููุฉ ุงูู 5 ุชู ุฅุฏุฑุงุฌูุง ุจูุฌุงุญ โ';
    ELSE
        RAISE WARNING 'ุจุนุถ ุงููููุงุช ูู ูุชู ุฅุฏุฑุงุฌูุง - ุชุญูู ูู ูุฌูุฏ ูููุงุช ููุฑุฑุฉ';
    END IF;
END $$;

-- ุนุฑุถ ุงููููุงุช ุงูุฅุถุงููุฉ ุงููุถุงูุฉ ููุชุฃููุฏ
SELECT 
    id,
    title,
    category,
    file_size,
    downloads,
    created_at
FROM public.files 
WHERE title IN (
    'ููู ุงูุงุฌุงุจุฉ ุงููุงุญุฏุฉ',
    'ุจุณุจูุณุฉ ุงููุนุงูู',
    'ุงูููุฑุฏุฉ ุงููุชุดุงุจูุฉ',
    'ุงูุณุจ ุนููุงู ูููุต',
    'ุงูุชุนุฏุงุฏ'
)
ORDER BY created_at DESC;

COMMIT;
